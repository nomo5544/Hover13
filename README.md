# Hover13
опис вимог та логіки роботи Хром-розширення:

### 1. Основна мета

Створення інструменту, який дозволяє швидко переглядати текст біблійних віршів, згаданих у будь-якому скопійованому тексті, без необхідності вручну шукати їх у Біблії.

### 2. Ключові вимоги

* **Збереження форматування:** Програма повинна зчитувати не просто чистий текст, а HTML-вміст буфера обміну, щоб зберегти жирний шрифт, курсив, кольори та структуру оригінального документа.
* **Автоматичне розпізнавання посилань:** Система має автоматично знаходити згадки біблійних книг, розділів та віршів (наприклад, "Матвія 5:3", "Буття 1.1", "2Кор 3.4-6").
* **Інтерактивність (Hover):** При наведенні курсору на розпізнане посилання має з'являтися спливаюче вікно (підказка) з повним текстом цього вірша.
* **Відображення на новій сторінці:** Результат обробки має відкриватися в новій вкладці браузера, де текст виглядає як документ.

### 3. Алгоритм роботи програми

#### Крок 1: Зчитування та обробка (popup.js)

1. Користувач копіює текст у буфер обміну.
2. Натискає на іконку розширення та кнопку "Відкрити сторінку" (або аналогічну).
3. Розширення звертається до буфера обміну через `navigator.clipboard.read()` з типом `'text/html'`.
4. Використовується **регулярний вираз (Regex)**, який шукає патерни біблійних посилань.
5. Знайдені посилання замінюються на HTML-теги `<a>` з особливим класом (наприклад, `class="bible-link"`) та атрибутом `data-reference`, у якому зберігається координата вірша.
6. Модифікований HTML-код зберігається у локальне сховище браузера (`chrome.storage.local`).
7. Відкривається нова сторінка розширення (`textPage.html`).

#### Крок 2: Відображення (textPage.js / textPage.html)

1. Сторінка завантажує збережений HTML зі сховища і вставляє його в основний контейнер.
2. Стилі CSS забезпечують вигляд "паперового документа" (білий фон, тіні, відступи).

#### Крок 3: Функція "Hover" (спливаюче вікно)

1. Програма додає слухача подій `mouseover` на всі елементи з класом `.bible-link`.
2. Коли курсор опиняється над посиланням:
* Програма зчитує значення з `data-reference`.
* Відбувається пошук тексту вірша. Можливі два варіанти: звернення до **зовнішнього API** (наприклад, `getbible.net`) або використання **локального JSON-файлу** (`bibleText.json`) з усіма текстами Біблії для миттєвої роботи офлайн.
* Текст вірша відображається у динамічно створеному блоці (tooltip), який з'являється поруч із курсором.


3. При відведенні курсору (`mouseout`) вікно з текстом зникає.

### 4. Технічні деталі:

* **Підтримка діапазонів:** Розпізнавання не тільки одного вірша, а й цілих уривків (наприклад, `8-12`).
* **Специфіка мови:** Регулярний вираз налаштований на українські назви книг та специфічні скорочення (включаючи ті, що починаються з цифри, як "1Петр").
* **Коректне позиціонування підказки:** Логіка, яка перевіряє межі екрана, щоб спливаюче вікно не "випадало" за межі видивої зони браузера.
